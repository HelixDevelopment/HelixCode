<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3 Quick Reference - HelixCode</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .quick-ref-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        .quick-ref-header {
            text-align: center;
            margin-bottom: 60px;
        }
        .quick-ref-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .quick-ref-subtitle {
            font-size: 1.5rem;
            color: #666;
        }
        .quick-ref-section {
            margin: 60px 0;
        }
        .quick-ref-section h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            border-bottom: 3px solid #6b46ff;
            padding-bottom: 10px;
        }
        .quick-ref-section h3 {
            font-size: 1.5rem;
            margin-top: 30px;
            margin-bottom: 15px;
            color: #6b46ff;
        }
        .code-example {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            white-space: pre;
        }
        .quick-ref-content {
            background: #fff;
            padding: 30px;
            margin: 20px 0;
            border-radius: 4px;
            line-height: 1.8;
        }
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .nav-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .nav-card:hover {
            transform: translateY(-5px);
            background: #e9ecef;
        }
        .nav-card a {
            color: #6b46ff;
            text-decoration: none;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <div class="logo">
                <a href="index.html"><span class="logo-helix">Helix</span><span class="logo-code">Code</span></a>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="PHASE_3_FEATURES.html">Phase 3 Features</a></li>
                <li><a href="PHASE_3_API_REFERENCE.html">API Reference</a></li>
                <li><a href="manual/">Manual</a></li>
            </ul>
        </div>
    </nav>

    <div class="quick-ref-container">
        <div class="quick-ref-header">
            <h1 class="quick-ref-title">Phase 3 Quick Reference</h1>
            <p class="quick-ref-subtitle">Quick reference guide for common Phase 3 operations</p>
        </div>

        <div class="nav-grid">
            <div class="nav-card">
                <a href="#initialization">Initialization</a>
            </div>
            <div class="nav-card">
                <a href="#session-management">Session Management</a>
            </div>
            <div class="nav-card">
                <a href="#memory-system">Memory System</a>
            </div>
            <div class="nav-card">
                <a href="#state-persistence">State Persistence</a>
            </div>
            <div class="nav-card">
                <a href="#template-system">Template System</a>
            </div>
            <div class="nav-card">
                <a href="#integration-patterns">Integration Patterns</a>
            </div>
            <div class="nav-card">
                <a href="#common-tasks">Common Tasks</a>
            </div>
            <div class="nav-card">
                <a href="#configuration">Configuration</a>
            </div>
        </div>

        <section class="quick-ref-section" id="initialization">
            <h2>Initialization</h2>
            <div class="code-example">import (
    "dev.helix.code/internal/session"
    "dev.helix.code/internal/memory"
    "dev.helix.code/internal/persistence"
    "dev.helix.code/internal/template"
)

// Create managers
sessionMgr := session.NewManager()
memoryMgr := memory.NewManager()
templateMgr := template.NewManager()

// Set up persistence
store := persistence.NewStore("./helixcode_data")
store.SetSessionManager(sessionMgr)
store.SetMemoryManager(memoryMgr)
store.SetTemplateManager(templateMgr)
store.EnableAutoSave(300)  // 5 minutes

// Load built-in templates
templateMgr.RegisterBuiltinTemplates()

// Restore previous state
store.Load()</div>
        </section>

        <section class="quick-ref-section" id="session-management">
            <h2>Session Management</h2>

            <h3>Create and Start Session</h3>
            <div class="code-example">sess := sessionMgr.Create("feature-name", session.ModeBuilding, "project-id")
sess.AddTag("api")
sessionMgr.Start(sess.ID)</div>

            <h3>Session Modes</h3>
            <div class="code-example">session.ModePlanning     // Design and architecture
session.ModeBuilding     // Implementation
session.ModeTesting      // Quality assurance
session.ModeRefactoring  // Code improvement
session.ModeDebugging    // Issue investigation
session.ModeDeployment   // Release preparation</div>

            <h3>Session Lifecycle</h3>
            <div class="code-example">sessionMgr.Start(id)      // idle → active
sessionMgr.Pause(id)      // active → paused
sessionMgr.Resume(id)     // paused → active
sessionMgr.Complete(id)   // active → completed
sessionMgr.Fail(id, reason) // active → failed</div>

            <h3>Query Sessions</h3>
            <div class="code-example">all := sessionMgr.GetAll()
byProject := sessionMgr.GetByProject("project-id")
byMode := sessionMgr.GetByMode(session.ModeBuilding)
byStatus := sessionMgr.GetByStatus(session.StatusActive)
byTag := sessionMgr.GetByTag("api")
recent := sessionMgr.GetRecent(10)</div>
        </section>

        <section class="quick-ref-section" id="memory-system">
            <h2>Memory System</h2>

            <h3>Create Conversation</h3>
            <div class="code-example">conv := memoryMgr.CreateConversation("Feature Implementation")
conv.SessionID = sess.ID  // Link to session</div>

            <h3>Add Messages</h3>
            <div class="code-example">// User message
memoryMgr.AddMessage(conv.ID, memory.NewUserMessage("Help me debug this"))

// Assistant message
memoryMgr.AddMessage(conv.ID, memory.NewAssistantMessage("Sure, let's look at..."))

// System message
memoryMgr.AddMessage(conv.ID, memory.NewSystemMessage("You are a debugging expert"))</div>

            <h3>Query Messages</h3>
            <div class="code-example">all := conv.GetMessages()
userOnly := conv.GetByRole(memory.RoleUser)
recent := conv.GetRecent(10)
results := conv.Search("debug")
text := conv.ToText()</div>

            <h3>Conversation Limits</h3>
            <div class="code-example">conv.SetMaxMessages(500)
conv.SetMaxTokens(50000)
total := conv.TotalTokens()
conv.Truncate(100)  // Keep last 100 messages</div>
        </section>

        <section class="quick-ref-section" id="state-persistence">
            <h2>State Persistence</h2>

            <h3>Save Operations</h3>
            <div class="code-example">store.Save()              // Save all
store.SaveSessions()      // Save sessions only
store.SaveConversations() // Save conversations only
store.SaveTemplates()     // Save templates only</div>

            <h3>Load Operations</h3>
            <div class="code-example">store.Load()              // Load all
store.LoadSessions()      // Load sessions only
store.LoadConversations() // Load conversations only
store.LoadTemplates()     // Load templates only</div>

            <h3>Auto-Save</h3>
            <div class="code-example">store.EnableAutoSave(300)  // Every 5 minutes
store.DisableAutoSave()
enabled := store.IsAutoSaveEnabled()
interval := store.GetAutoSaveInterval()</div>

            <h3>Backup and Restore</h3>
            <div class="code-example">// Backup
backupPath := "./backups/backup-" + time.Now().Format("20060102-150405")
store.Backup(backupPath)

// Restore
store.Restore(backupPath)</div>

            <h3>Storage Formats</h3>
            <div class="code-example">store.SetFormat(persistence.FormatJSON)        // Human-readable
store.SetFormat(persistence.FormatCompactJSON) // Smaller
store.SetFormat(persistence.FormatJSONGZIP)    // Compressed</div>
        </section>

        <section class="quick-ref-section" id="template-system">
            <h2>Template System</h2>

            <h3>Create Template</h3>
            <div class="code-example">tpl := template.NewTemplate("Handler", "HTTP handler", template.TypeCode)
tpl.SetContent(`func Handle{{name}}(w http.ResponseWriter, r *http.Request) {
    {{implementation}}
}`)

tpl.AddVariable(template.Variable{
    Name:     "name",
    Required: true,
    Type:     "string",
})

templateMgr.Register(tpl)</div>

            <h3>Template Types</h3>
            <div class="code-example">template.TypeCode          // Code generation
template.TypePrompt        // AI prompts
template.TypeWorkflow      // Process templates
template.TypeDocumentation // Documentation
template.TypeEmail         // Email templates
template.TypeCustom        // Custom use</div>

            <h3>Render Templates</h3>
            <div class="code-example">// By name
result, _ := templateMgr.RenderByName("Function", map[string]interface{}{
    "function_name": "ProcessData",
    "parameters":    "data []byte",
    "return_type":   "error",
    "body":          "return nil",
})</div>

            <h3>Built-in Templates</h3>
            <div class="code-example">templateMgr.RegisterBuiltinTemplates()

// 1. Function
// 2. Code Review
// 3. Bug Fix
// 4. Function Documentation
// 5. Status Update Email</div>
        </section>

        <section class="quick-ref-section" id="integration-patterns">
            <h2>Integration Patterns</h2>

            <h3>Session + Conversation</h3>
            <div class="code-example">// Create linked session and conversation
sess := sessionMgr.Create("feature", session.ModeBuilding, "project")
sessionMgr.Start(sess.ID)

conv := memoryMgr.CreateConversation(sess.Name)
conv.SessionID = sess.ID</div>

            <h3>Template + Conversation</h3>
            <div class="code-example">// Generate prompt from template
prompt, _ := templateMgr.RenderByName("Code Review", vars)

// Add to conversation
memoryMgr.AddMessage(conv.ID, memory.NewUserMessage(prompt))</div>

            <h3>Complete Workflow</h3>
            <div class="code-example">// 1. Create session
sess := sessionMgr.Create("auth", session.ModeBuilding, "api")
sessionMgr.Start(sess.ID)

// 2. Create conversation
conv := memoryMgr.CreateConversation("Auth Implementation")
conv.SessionID = sess.ID

// 3. Use template
code, _ := templateMgr.RenderByName("Function", vars)

// 4. Add to conversation
memoryMgr.AddMessage(conv.ID, memory.NewAssistantMessage(code))

// 5. Auto-saved by persistence</div>
        </section>

        <section class="quick-ref-section" id="common-tasks">
            <h2>Common Tasks</h2>

            <h3>Start New Feature</h3>
            <div class="code-example">sess := sessionMgr.Create("feature-name", session.ModeBuilding, "project")
sess.AddTag("feature")
sessionMgr.Start(sess.ID)

conv := memoryMgr.CreateConversation("Feature: " + sess.Name)
conv.SessionID = sess.ID</div>

            <h3>Debug Issue</h3>
            <div class="code-example">sess := sessionMgr.Create("bug-123", session.ModeDebugging, "project")
sess.SetMetadata("issue_id", "123")
sessionMgr.Start(sess.ID)

conv := memoryMgr.CreateConversation("Debug: Issue 123")
conv.SessionID = sess.ID

prompt, _ := templateMgr.RenderByName("Bug Fix", vars)
memoryMgr.AddMessage(conv.ID, memory.NewUserMessage(prompt))</div>

            <h3>Code Review</h3>
            <div class="code-example">sess := sessionMgr.Create("review-pr-42", session.ModeBuilding, "project")
sess.AddTag("review")
sessionMgr.Start(sess.ID)

conv := memoryMgr.CreateConversation("PR #42 Review")
conv.SessionID = sess.ID

prompt, _ := templateMgr.RenderByName("Code Review", map[string]interface{}{
    "language": "Go",
    "code":     prCode,
})
memoryMgr.AddMessage(conv.ID, memory.NewUserMessage(prompt))</div>
        </section>

        <section class="quick-ref-section" id="configuration">
            <h2>Configuration</h2>

            <h3>Recommended Config (YAML)</h3>
            <div class="code-example">persistence:
  storage_path: "./helixcode_data"
  format: "json-gzip"  # Compressed
  auto_save: true
  auto_save_interval: 300  # 5 minutes

session:
  max_history: 100
  default_mode: "building"

memory:
  max_messages_per_conversation: 500
  max_total_tokens: 50000

templates:
  template_directory: "./templates"
  load_builtin: true</div>

            <h3>In Code</h3>
            <div class="code-example">// Set limits
conv.SetMaxMessages(500)
conv.SetMaxTokens(50000)
memoryMgr.SetMaxMessages(500)

// Configure auto-save
store.EnableAutoSave(300)

// Set format
store.SetFormat(persistence.FormatJSONGZIP)</div>

            <h3>Performance Tips</h3>
            <div class="code-example">// 1. Set limits
conv.SetMaxMessages(500)
conv.SetMaxTokens(50000)

// 2. Use GZIP for large data
store.SetFormat(persistence.FormatJSONGZIP)

// 3. Trim regularly
sessionMgr.TrimHistory(50)
memoryMgr.TrimConversations(50)

// 4. Auto-save interval (not too frequent)
store.EnableAutoSave(300)  // 5 minutes

// 5. Delete old data
for _, sess := range sessionMgr.GetAll() {
    if sess.Status == session.StatusCompleted {
        sessionMgr.Export(sess.ID)  // Backup first
        sessionMgr.Delete(sess.ID)
    }
}</div>
        </section>

        <div style="text-align: center; margin: 60px 0;">
            <a href="PHASE_3_API_REFERENCE.html" class="btn btn-primary btn-large">Full API Reference</a>
            <a href="PHASE_3_FEATURES.html" class="btn btn-outline btn-large">Phase 3 Features</a>
            <a href="../examples/phase3/" class="btn btn-outline btn-large">Example Projects</a>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">HelixCode</h3>
                    <p>Enterprise AI Development Platform</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 HelixCode. Open source under MIT License.</p>
            </div>
        </div>
    </footer>
</body>
</html>
